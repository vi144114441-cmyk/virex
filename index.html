<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LÃ¬ XÃ¬ 2026</title>

<style>
body{
    margin:0;
    padding:20px;
    background:linear-gradient(135deg,#b30000,#ffcc00);
    font-family:Arial, sans-serif;
    text-align:center;
}

h2{
    color:white;
}

.container{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:15px;
    max-width:400px;
    margin:auto;
}

.lixi{
    background:#c40000;
    color:#ffd700;
    padding:30px 10px;
    border-radius:15px;
    cursor:pointer;
    font-weight:bold;
    transition:0.3s;
    min-height:80px;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
}

.lixi:hover{
    transform:scale(1.05);
}

.locked{
    background:#555 !important;
    color:#ccc !important;
    cursor:not-allowed;
}
</style>
</head>

<body>

<h2>ðŸ§§ LÃ¬ XÃ¬ May Máº¯n 2026</h2>
<div class="container" id="lixiContainer"></div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_AUTH_DOMAIN",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_STORAGE_BUCKET",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const container = document.getElementById("lixiContainer");

// Táº¡o 10 bao
for(let i=1;i<=10;i++){
    let div = document.createElement("div");
    div.className="lixi";
    div.innerText="Bao lÃ¬ xÃ¬ " + i;
    div.onclick=()=>openLixi(i,div);
    container.appendChild(div);
}

// Táº¡o cáº¥u hÃ¬nh pháº§n thÆ°á»Ÿng (cháº¡y 1 láº§n duy nháº¥t)
async function generateRewards(){

    const configRef = doc(db,"lixi","config");
    const configSnap = await getDoc(configRef);

    if(configSnap.exists()) return configSnap.data().rewards;

    let rewards = new Array(10).fill(null);
    let positions = [...Array(10).keys()].sort(()=>Math.random()-0.5);

    rewards[positions[0]] = {type:"money", value:500000};
    rewards[positions[1]] = {type:"money", value:200000};
    rewards[positions[2]] = {type:"powerbank"};
    rewards[positions[3]] = {type:"wish"};
    rewards[positions[4]] = {type:"wish"};

    for(let i=5;i<10;i++){
        rewards[positions[i]] = {
            type:"money",
            value:(Math.floor(Math.random()*10)+1)*10000
        };
    }

    await setDoc(configRef,{rewards:rewards});
    return rewards;
}

// Má»Ÿ bao
async function openLixi(id,el){

    const ref = doc(db,"lixi","bao"+id);
    const snap = await getDoc(ref);

    if(snap.exists() && snap.data().opened){
        el.classList.add("locked");
        el.innerText="ÄÃ£ cÃ³ ngÆ°á»i má»Ÿ";
        return;
    }

    const rewards = await generateRewards();
    const reward = rewards[id-1];

    let resultText = "";

    if(reward.type==="money"){
        resultText = "ðŸ’° "+reward.value.toLocaleString()+" VNÄ";
    }
    else if(reward.type==="powerbank"){
        resultText = "ðŸ”‹ ChÃºc má»«ng! Báº¡n trÃºng Sáº¡c Dá»± PhÃ²ng 10.000mAh";
    }
    else{
        let wishes = [
            "ChÃºc báº¡n nÄƒm má»›i phÃ¡t tÃ i phÃ¡t lá»™c ðŸŽŠ",
            "An khang thá»‹nh vÆ°á»£ng ðŸŒ¸",
            "Sá»©c khá»e dá»“i dÃ o ðŸ’–",
            "Váº¡n sá»± nhÆ° Ã½ â¤ï¸"
        ];
        resultText = "ðŸŽŠ "+wishes[Math.floor(Math.random()*wishes.length)];
    }

    await setDoc(ref,{opened:true});

    el.innerHTML = resultText;
    el.classList.add("locked");
}

</script>

</body>
</html>

