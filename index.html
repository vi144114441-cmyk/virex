<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L√¨ X√¨ 3D B√≠nh Ng·ªç 2026</title>

<style>
body{
    margin:0;
    font-family:Arial;
    text-align:center;
    background:linear-gradient(135deg,#8B0000,#b30000);
    color:white;
    overflow:hidden;
}

h1{margin-top:20px;}

input{
    padding:10px;
    border:none;
    border-radius:8px;
    font-size:16px;
}

button{
    padding:10px 20px;
    border:none;
    border-radius:8px;
    background:gold;
    font-weight:bold;
    cursor:pointer;
}

#countdown{
    margin-top:10px;
    font-size:18px;
    color:#FFD700;
}

.card-container{
    perspective:1000px;
    width:220px;
    height:320px;
    margin:40px auto;
}

.card{
    width:100%;
    height:100%;
    position:relative;
    transform-style:preserve-3d;
    transition:1s;
}

.card.open{
    transform:rotateY(180deg);
}

.front,.back{
    position:absolute;
    width:100%;
    height:100%;
    backface-visibility:hidden;
    border-radius:15px;
}

.front{
    background:url('lixi1.png') center/cover;
}

.back{
    background:gold;
    color:red;
    font-size:28px;
    display:flex;
    justify-content:center;
    align-items:center;
    transform:rotateY(180deg);
}

.firework{
    position:absolute;
    font-size:30px;
    animation:explode 1s ease-out forwards;
}

@keyframes explode{
    0%{opacity:1;transform:scale(0);}
    100%{opacity:0;transform:scale(3);}
}
</style>
</head>

<body>

<h1>üßß L√å X√å 3D B√çNH NG·ªå 2026 üê¥</h1>

<input type="text" id="nameInput" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n">
<br><br>
<button onclick="openCard()">M·ªû L√å X√å</button>

<div id="countdown"></div>

<div class="card-container">
    <div class="card" id="card">
        <div class="front"></div>
        <div class="back" id="rewardText">???</div>
    </div>
</div>

<audio id="bgMusic" src="nhactet.mp3" loop></audio>

<script>
const WEBAPP_URL="https://script.google.com/macros/s/AKfycbz58kCVNFXfj-8sDwM2qaNu_Wvcu9908looXkHtNnPxbN0L85mwVNl0O8Mjn3xfOLnZ4g/exec";

const rewards=[
"20.000ƒë üí∞",
"50.000ƒë üí∞",
"100.000ƒë üí∞",
"200.000ƒë üí∞",
"Ch√∫c M·ª´ng NƒÉm M·ªõi üéâ",
"May M·∫Øn C·∫£ NƒÉm ‚ú®"
];

function getToday(){
    return new Date().toLocaleDateString();
}

function openCard(){
    const name=document.getElementById("nameInput").value.trim();
    if(name===""){
        alert("Vui l√≤ng nh·∫≠p t√™n!");
        return;
    }

    if(localStorage.getItem("openedDate")===getToday()){
        alert("B·∫°n ƒë√£ m·ªü h√¥m nay r·ªìi!");
        return;
    }

    const reward=rewards[Math.floor(Math.random()*rewards.length)];
    document.getElementById("rewardText").innerText=reward;
    document.getElementById("card").classList.add("open");

    localStorage.setItem("openedDate",getToday());
    showCountdown();

    sendToSheet(name,reward);
    playMusic();
    firework();
}

function sendToSheet(name,reward){
    fetch(WEBAPP_URL,{
        method:"POST",
        body:JSON.stringify({name:name,reward:reward})
    });
}

function playMusic(){
    const music=document.getElementById("bgMusic");
    music.play();
}

function firework(){
    for(let i=0;i<10;i++){
        const fw=document.createElement("div");
        fw.className="firework";
        fw.innerHTML="‚ù§Ô∏è";
        fw.style.left=Math.random()*window.innerWidth+"px";
        fw.style.top=Math.random()*window.innerHeight+"px";
        document.body.appendChild(fw);
        setTimeout(()=>fw.remove(),1000);
    }
}

function showCountdown(){
    setInterval(()=>{
        const now=new Date();
        const tomorrow=new Date();
        tomorrow.setHours(24,0,0,0);
        const diff=tomorrow-now;

        const h=Math.floor(diff/1000/60/60);
        const m=Math.floor(diff/1000/60%60);
        const s=Math.floor(diff/1000%60);

        document.getElementById("countdown").innerText=
        "‚è≥ Reset sau: "+h+"h "+m+"m "+s+"s";
    },1000);
}

showCountdown();
</script>

</body>
</html>
