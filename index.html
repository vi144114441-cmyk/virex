<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L√¨ X√¨ 3D B√≠nh Ng·ªç 2026</title>

<style>
*{box-sizing:border-box;}
body{
    margin:0;
    font-family:Arial, sans-serif;
    text-align:center;
    color:white;
    overflow-x:hidden;
    background: linear-gradient(135deg, #8B0000, #ff0000, #b71c1c);
}

/* MAIN */
.main-content{ display:none; padding:30px 15px; }

.container{
    display:grid;
    gap:20px;
    margin:30px auto 0;
    max-width:1200px;
    grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
}

.lixi{ display:flex; justify-content:center; perspective:1000px; }

.card{
    width:100%;
    max-width:150px;
    aspect-ratio:1/2;
    position:relative;
    transform-style:preserve-3d;
    cursor:pointer;
}

.front{
    position:absolute;
    width:100%;
    height:100%;
    border-radius:18px;
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
}

.flap{
    position:absolute;
    top:0;
    width:100%;
    height:50%;
    background:linear-gradient(#d32f2f,#aa0000);
    clip-path:polygon(0 0,100% 0,50% 100%);
    transform-origin:top;
    transition:transform 0.8s;
    border-top-left-radius:18px;
    border-top-right-radius:18px;
}

.back{
    position:absolute;
    width:80%;
    height:60%;
    top:25%;
    left:10%;
    background:white;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:10px;
    font-weight:bold;
    color:#8B0000;
    transform:translateY(60px);
    opacity:0;
    transition:all 0.8s;
}

.lixi.open .flap{ transform:rotateX(-150deg); }
.lixi.open .back{ transform:translateY(-30px); opacity:1; }

/* WELCOME + NAME + PASSWORD */
.welcome-screen,.name-screen,.password-screen{
    position:fixed;
    inset:0;
    background:#8B0000;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    z-index:9999;
    padding:20px;
}

button{
    margin-top:15px;
    padding:10px 25px;
    border:none;
    border-radius:12px;
    cursor:pointer;
    font-weight:bold;
}
</style>
</head>
<body>

<!-- WELCOME -->
<div class="welcome-screen" id="welcome">
    <h1>üéâ CH√öC M·ª™NG NƒÇM M·ªöI 2026 üéâ</h1>

    <p style="
        max-width:600px;
        margin:20px auto;
        font-size:18px;
        line-height:1.6;
        color:yellow;
    ">
        üå∏ K√≠nh ch√∫c b·∫°n nƒÉm m·ªõi <b>An Khang ‚Äì Th·ªãnh V∆∞·ª£ng ‚Äì V·∫°n S·ª± Nh∆∞ √ù</b> üå∏<br>
        üí∞ Ti·ªÅn v√†o nh∆∞ n∆∞·ªõc ‚Äì C√¥ng vi·ªác hanh th√¥ng üí∞<br>
        ‚ù§Ô∏è Gia ƒë√¨nh h·∫°nh ph√∫c ‚Äì S·ª©c kh·ªèe d·ªìi d√†o ‚ù§Ô∏è
    </p>

    <button onclick="showNameScreen()">Nh·∫≠n L√¨ X√¨ üßß</button>
</div>

<!-- NAME -->
<div class="name-screen" id="nameScreen" style="display:none;">
<h2>üéä Nh·∫≠p t√™n c·ªßa b·∫°n üéä</h2>
<input type="text" id="playerName" style="padding:12px;border-radius:10px;border:none;">
<button onclick="startGame()">B·∫Øt ƒë·∫ßu</button>
</div>

<!-- MAIN -->
<div class="main-content" id="main">
<h2>üßß L√å X√å MAY M·∫ÆN - B√çNH NG·ªå 2026 üßß</h2>
<div class="container" id="container"></div>
</div>

<script>

/* ===== LINK GOOGLE SHEET ===== */
const SHEET_URL="https://script.google.com/macros/s/AKfycbxZ32N5vETBsJ_U_DVbX_o152wrGajPo9644PqDKFDCfc3a6hp5NugQch1AYc6rKLol/exec";

const PASSWORD="LAMGICOLANHAI";
let currentPlayer="";

function getToday(){
    let d=new Date();
    return d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();
}

/* ===== COUNTDOWN RESET 00:00 ===== */
function showCountdown(){
    if(document.getElementById("countdown")) return;

    let box=document.createElement("div");
    box.id="countdown";
    box.style.position="fixed";
    box.style.bottom="10px";
    box.style.left="50%";
    box.style.transform="translateX(-50%)";
    box.style.background="rgba(0,0,0,0.7)";
    box.style.padding="10px 20px";
    box.style.borderRadius="10px";
    document.body.appendChild(box);

    function update(){
        let now=new Date();
        let midnight=new Date();
        midnight.setHours(24,0,0,0);
        let diff=midnight-now;

        if(diff<=0){
            localStorage.removeItem("openedDate");
            location.reload();
        }

        let h=Math.floor(diff/3600000);
        let m=Math.floor((diff%3600000)/60000);
        let s=Math.floor((diff%60000)/1000);

        box.innerHTML="‚è≥ Reset l√∫c 00:00 c√≤n: "+h+"h "+m+"m "+s+"s";
    }
    update();
    setInterval(update,1000);
}

/* ===== UI FLOW ===== */
function showNameScreen(){
    document.getElementById("welcome").style.display="none";
    document.getElementById("nameScreen").style.display="flex";
}

function startGame(){
    let name=document.getElementById("playerName").value.trim();
    if(!name){ alert("Nh·∫≠p t√™n!"); return; }
    currentPlayer=name;
    document.getElementById("nameScreen").style.display="none";
    document.getElementById("main").style.display="block";

    if(localStorage.getItem("openedDate")===getToday()){
        showCountdown();
    }
}

/* ===== T·∫†O 25 BAO ===== */
const container=document.getElementById("container");
const images=["lixi1.jpg","lixi2.jpg","lixi3.jpg","lixi4.jpg","lixi5.jpg"];

for(let i=0;i<25;i++){
    let wrap=document.createElement("div");
    wrap.className="lixi";

    let card=document.createElement("div");
    card.className="card";

    let front=document.createElement("div");
    front.className="front";
    front.style.background=`url(${images[i%5]}) center/cover no-repeat`;

    let flap=document.createElement("div");
    flap.className="flap";

    let back=document.createElement("div");
    back.className="back";

    card.append(front,flap,back);
    wrap.appendChild(card);
    wrap.onclick=()=>openCard(wrap,back);
    container.appendChild(wrap);
}

/* ===== M·ªû BAO ===== */
function openCard(wrap,back){

    if(wrap.classList.contains("open")) return;

    if(localStorage.getItem("openedDate")===getToday()){
        showPassword();
        return;
    }

    let r=Math.random()*100;
    let reward="";

    if(r<30){
        reward="üå∏ Ch√∫c b·∫°n may m·∫Øn!";
    }else if(r<80){
        reward="üí∞ "+(Math.floor(Math.random()*48+2)*2000).toLocaleString("vi-VN")+" VNƒê";
    }else{
        reward="üí∞ 200.000 VNƒê";
    }

    back.innerText=reward;
    wrap.classList.add("open");

    localStorage.setItem("openedDate",getToday());
    showCountdown();

    fetch(SHEET_URL,{
        method:"POST",
        mode:"no-cors",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({
            name:currentPlayer,
            prize:reward,
            time:new Date().toLocaleString()
        })
    });

    setTimeout(()=>{
        alert("üéâ "+currentPlayer+" nh·∫≠n ƒë∆∞·ª£c:\n"+reward);
    },800);
}

/* ===== PASSWORD ===== */
function showPassword(){
    let overlay=document.createElement("div");
    overlay.className="password-screen";
    overlay.innerHTML=`
        <h2>üîí Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ m·ªü l·∫°i</h2>
        <input type="password" id="passInput" style="padding:12px;border-radius:10px;border:none;">
        <button onclick="checkPass()">X√°c nh·∫≠n</button>
    `;
    document.body.appendChild(overlay);

    window.checkPass=function(){
        if(document.getElementById("passInput").value===PASSWORD){
            localStorage.removeItem("openedDate");
            overlay.remove();
            alert("M·∫≠t kh·∫©u ƒë√∫ng! M·ªü l·∫°i ƒë∆∞·ª£c r·ªìi.");
        }else{
            alert("Sai m·∫≠t kh·∫©u!");
        }
    }
}
</script>
</body>
</html>
