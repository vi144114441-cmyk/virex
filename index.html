<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L√¨ X√¨ 3D B√≠nh Ng·ªç 2026</title>

<style>
*{box-sizing:border-box;}

body{
    margin:0;
    font-family:Arial, sans-serif;
    text-align:center;
    color:white;
    overflow-x:hidden;
    background: linear-gradient(135deg, #8B0000, #ff0000, #b71c1c);
}

/* PH√ÅO HOA */
.rocket{
    position:fixed;
    width:4px;
    height:12px;
    background:gold;
    border-radius:2px;
    box-shadow:0 0 10px gold;
    pointer-events:none;
}

.firework{
    position:fixed;
    width:6px;
    height:6px;
    border-radius:50%;
    pointer-events:none;
    animation:explode 1.2s ease-out forwards;
    box-shadow:0 0 12px currentColor;
}

@keyframes explode{
    from{ transform:translate(0,0); opacity:1; }
    to{ transform:translate(var(--x), var(--y)); opacity:0; }
}

/* WELCOME */
.welcome-screen{
    position:fixed;
    inset:0;
    background:linear-gradient(#8B0000,#a00000);
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    padding:20px;
    z-index:9999;
}

.welcome-screen button{
    margin-top:25px;
    padding:14px 32px;
    border:none;
    border-radius:18px;
    background:gold;
    color:#8B0000;
    font-weight:bold;
    cursor:pointer;
}

/* NAME SCREEN */
.name-screen{
    position:fixed;
    inset:0;
    background:#8B0000;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    z-index:9999;
}

/* MAIN */
.main-content{
    display:none;
    padding:30px 15px;
}

.container{
    display:grid;
    gap:20px;
    margin:30px auto 0;
    width:100%;
    max-width:1200px;
    padding:0 15px;
    grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
}

/* L√å X√å */
.lixi{
    display:flex;
    justify-content:center;
    perspective:1000px;
}

.card{
    width:100%;
    max-width:150px;
    aspect-ratio:1/2;
    position:relative;
    transform-style:preserve-3d;
    cursor:pointer;
}

.front{
    position:absolute;
    width:100%;
    height:100%;
    border-radius:18px;
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
}

.flap{
    position:absolute;
    top:0;
    width:100%;
    height:50%;
    background:linear-gradient(#d32f2f,#aa0000);
    clip-path:polygon(0 0,100% 0,50% 100%);
    transform-origin:top;
    transition:transform 0.8s;
    border-top-left-radius:18px;
    border-top-right-radius:18px;
}

.back{
    position:absolute;
    width:80%;
    height:60%;
    top:25%;
    left:10%;
    background:white;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    padding:10px;
    font-weight:bold;
    color:#8B0000;
    transform:translateY(60px);
    opacity:0;
    transition:all 0.8s;
    box-shadow:0 8px 20px rgba(0,0,0,0.3);
}

.lixi.open .flap{ transform:rotateX(-150deg); }
.lixi.open .back{ transform:translateY(-30px); opacity:1; }

.password-screen{
    position:fixed;
    inset:0;
    background:#8B0000;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    z-index:9999;
    padding:20px;
}
</style>
</head>

<body>

<!-- WELCOME -->
<div class="welcome-screen" id="welcome">
    <h1>
    üéâ CH√öC M·ª™NG NƒÇM M·ªöI 2026 üéâ<br><br>
    CH√öC B·∫†N TH√ÄNH C√îNG<br>
    GIA ƒê√åNH H·∫†NH PH√öC<br>
    S·ª®C KH·ªéE D·ªíI D√ÄO ‚ù§Ô∏è
    </h1>
    <button onclick="showNameScreen()">Nh·∫≠n L√¨ X√¨ üßß</button>
</div>

<!-- NH·∫¨P T√äN -->
<div class="name-screen" id="nameScreen" style="display:none;">
    <h2>üéä Nh·∫≠p t√™n c·ªßa b·∫°n üéä</h2>
    <input type="text" id="playerName"
    style="padding:14px;border-radius:15px;border:none;width:250px;margin-top:15px;">
    <button onclick="startGame()"
    style="margin-top:15px;padding:10px 25px;border:none;border-radius:12px;">
    B·∫Øt ƒë·∫ßu
    </button>
</div>

<!-- MAIN -->
<div class="main-content" id="main">
    <h2>üßß L√å X√å MAY M·∫ÆN - B√çNH NG·ªå 2026 üßß</h2>
    <div class="container" id="container"></div>
</div>

<audio id="bgMusic" loop>
    <source src="nhactet.mp3" type="audio/mpeg">
</audio>

<script>

const SHEET_URL="https://script.google.com/macros/s/AKfycbyEjVjsQXOG_gJBda_6Vl3k7pgFJUrZ2YjAO0QzZBBwuPQijGvYkW-bssMaqmHYc0j0/exec";
let currentPlayer="";

function getToday(){
    let now=new Date();
    return now.getFullYear()+"-"+String(now.getMonth()+1).padStart(2,'0')+"-"+String(now.getDate()).padStart(2,'0');
}

function showCountdownToMidnight(){
    if(document.getElementById("countdownBox")) return;

    let box=document.createElement("div");
    box.id="countdownBox";
    box.style.position="fixed";
    box.style.bottom="15px";
    box.style.left="50%";
    box.style.transform="translateX(-50%)";
    box.style.background="rgba(0,0,0,0.7)";
    box.style.padding="10px 20px";
    box.style.borderRadius="12px";
    box.style.fontSize="14px";
    box.style.zIndex="9999";
    document.body.appendChild(box);

    function update(){
        let now=new Date();
        let midnight=new Date();
        midnight.setHours(24,0,0,0);
        let diff=midnight-now;

        if(diff<=0){
            localStorage.removeItem("openedDate");
            location.reload();
        }

        let h=Math.floor(diff/(1000*60*60));
        let m=Math.floor((diff%(1000*60*60))/(1000*60));
        let s=Math.floor((diff%(1000*60))/1000);

        box.innerHTML="‚è≥ Reset l√∫c 00:00 c√≤n: "+h+"h "+m+"m "+s+"s";
    }

    update();
    setInterval(update,1000);
}

function showNameScreen(){
    document.getElementById("welcome").style.display="none";
    document.getElementById("nameScreen").style.display="flex";
}

function startGame(){
    let name=document.getElementById("playerName").value.trim();
    if(!name){
        alert("Vui l√≤ng nh·∫≠p t√™n!");
        return;
    }
    currentPlayer=name;
    document.getElementById("nameScreen").style.display="none";
    enterApp();
}

function enterApp(){
    document.getElementById("main").style.display="block";
    const music=document.getElementById("bgMusic");
    music.volume=0.5;
    music.play();

    if(localStorage.getItem("openedDate")===getToday()){
        showCountdownToMidnight();
    }
}

const container=document.getElementById("container");
const images=["lixi1.jpg","lixi2.jpg","lixi3.jpg","lixi4.jpg","lixi5.jpg"];

for(let i=0;i<25;i++){
    let wrapper=document.createElement("div");
    wrapper.className="lixi";

    let card=document.createElement("div");
    card.className="card";

    let front=document.createElement("div");
    front.className="front";
    front.style.background=`url(${images[i%images.length]}) center/cover no-repeat`;

    let flap=document.createElement("div");
    flap.className="flap";

    let back=document.createElement("div");
    back.className="back";

    card.appendChild(front);
    card.appendChild(flap);
    card.appendChild(back);
    wrapper.appendChild(card);
    wrapper.onclick=()=>openCard(wrapper,back);
    container.appendChild(wrapper);
}

function openCard(wrapper,back){

    if(wrapper.classList.contains("open")) return;

    if(localStorage.getItem("openedDate")===getToday()){
        showPasswordScreen();
        return;
    }

    let random=Math.random()*100;
    let rewardText="";

    if(random<25){
        const wishes=["üå∏ T·∫∑ng b·∫°n m·ªôt c·ªëc n∆∞·ªõc n√®!","üéâ Ch√∫c b·∫°n s·ªõm c√≥ b·ªì nha!","üíñ Gia ƒë√¨nh vui v·∫ª nha!","üçÄ Ch√∫c m·ªçi d·ª± ƒë·ªãnh su√¥n s·∫ª!"];
        rewardText=wishes[Math.floor(Math.random()*wishes.length)];
    }else if(random<75){
        let amount=Math.floor(Math.random()*48+2)*2000;
        rewardText="üí∞ "+amount.toLocaleString("vi-VN")+" VNƒê";
    }else if(random<80){
        rewardText="üí∞ 500.000 VNƒê";
    }else{
        rewardText="üí∞ 200.000 VNƒê";
    }

    back.innerText=rewardText;
    wrapper.classList.add("open");

    localStorage.setItem("openedDate",getToday());
    showCountdownToMidnight();

    fetch(SHEET_URL,{
        method:"POST",
        body:JSON.stringify({
            name:currentPlayer,
            reward:rewardText,
            time:new Date().toLocaleString()
        })
    });

    setTimeout(()=>{
        alert("üéâ "+currentPlayer+" nh·∫≠n ƒë∆∞·ª£c:\n"+rewardText);
    },800);
}

function showPasswordScreen(){
    let overlay=document.createElement("div");
    overlay.className="password-screen";
    overlay.innerHTML=`
        <h2>üîí Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ m·ªü l·∫°i</h2>
        <input type="password" id="passInput" style="padding:14px;border-radius:15px;border:none;">
        <button onclick="checkPass()" style="margin-top:15px;padding:10px 25px;border:none;border-radius:12px;">X√°c nh·∫≠n</button>
    `;
    document.body.appendChild(overlay);

    window.checkPass=function(){
        let value=document.getElementById("passInput").value;
        if(value==="LAMGICOLANHAI"){
            localStorage.removeItem("openedDate");
            overlay.remove();
            alert("M·∫≠t kh·∫©u ƒë√∫ng! B·∫°n c√≥ th·ªÉ m·ªü l·∫°i.");
        }else{
            alert("Sai m·∫≠t kh·∫©u!");
        }
    }
}
</script>
</body>
</html>
